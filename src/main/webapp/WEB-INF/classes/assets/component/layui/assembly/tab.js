layui.define(["element","common"],function(f){var a="tab",g=layui.jquery,h=layui.element(),i=layui.common,d=0,e=function(){this.config={elem:undefined,closed:true,autoRefresh:false}};var b={};e.prototype.set=function(j){var k=this;g.extend(true,k.config,j);return k};e.prototype.init=function(){var k=this;var l=k.config;if(typeof(l.elem)!=="string"&&typeof(l.elem)!=="object"){common.throwError("Tab error: elem参数未定义或设置出错，具体设置格式请参考文档API.")}var m;if(typeof(l.elem)==="string"){m=g(""+l.elem+"")}if(typeof(l.elem)==="object"){m=l.elem}if(m.length===0){common.throwError("Tab error:找不到elem参数配置的容器，请检查.")}var j=m.attr("lay-filter");if(j===undefined||j===""){common.throwError("Tab error:请为elem容器设置一个lay-filter过滤器")}l.elem=m;b.titleBox=m.children("ul.layui-tab-title");b.contentBox=m.children("div.layui-tab-content");b.tabFilter=j;return k};e.prototype.exists=function(l){var k=b.titleBox===undefined?this.init():this,j=-1;b.titleBox.find("li").each(function(n,o){var m=g(this).children("cite");if(m.text()===l){j=n}});return j};e.prototype.tabAdd=function(n){var l=this;var m=l.config;var j=l.exists(n.title);if(j===-1){d++;var k='<iframe src="'+n.href+'" data-id="'+d+'"></iframe>';var o="";if(n.icon!==undefined){if(n.icon.indexOf("fa-")!==-1){o+='<i class="fa '+n.icon+'" aria-hidden="true"></i>'}else{o+='<i class="layui-icon">'+n.icon+"</i>"}}o+="<cite>"+n.title+"</cite>";if(m.closed){o+='<i class="layui-icon layui-unselect layui-tab-close" data-id="'+d+'">&#x1006;</i>'}h.tabAdd(b.tabFilter,{title:o,content:k});b.contentBox.find("iframe[data-id="+d+"]").each(function(){g(this).height(b.contentBox.height())});if(m.closed){b.titleBox.find("li").children("i.layui-tab-close[data-id="+d+"]").on("click",function(){h.tabDelete(b.tabFilter,g(this).parent("li").index()).init()})}h.tabChange(b.tabFilter,b.titleBox.find("li").length-1)}else{h.tabChange(b.tabFilter,j);if(m.autoRefresh){m.elem.find("div.layui-tab-content > div").eq(j).children("iframe")[0].contentWindow.location.reload()}}};e.prototype.on=function(j,k){};var c=new e();f(a,function(j){return c.set(j)})});