layui.define(["element","common"],function(c){var d=layui.jquery,g=parent.layer===undefined?layui.layer:parent.layer,e=layui.element(),i=layui.common,h="tb_navbar";var b=function(){this.config={elem:undefined,data:undefined,url:undefined,type:"GET",cached:false,spreadOne:false};this.v="0.0.1"};b.prototype.render=function(){var l=this;var m=l.config;if(typeof(m.elem)!=="string"&&typeof(m.elem)!=="object"){i.throwError("Navbar error: elem参数未定义或设置出错，具体设置格式请参考文档API.")}var o;if(typeof(m.elem)==="string"){o=d(""+m.elem+"")}if(typeof(m.elem)==="object"){o=m.elem}if(o.length===0){i.throwError("Navbar error:找不到elem参数配置的容器，请检查.")}if(m.data===undefined&&m.url===undefined){i.throwError("Navbar error:请为Navbar配置数据源.")}if(m.data!==undefined&&typeof(m.data)==="object"){var k=f(m.data);o.html(k);e.init();l.config.elem=o}else{if(m.cached){var n=layui.data(h);if(n.navbar===undefined){d.ajax({type:m.type,url:m.url,async:false,dataType:"json",success:function(p,q,s){layui.data(h,{key:"navbar",value:p});var r=f(p);o.html(r);e.init()},error:function(r,p,q){i.msgError("Navbar error:"+q)},complete:function(q,p){l.config.elem=o}})}else{var k=f(n.navbar);o.html(k);e.init();l.config.elem=o}}else{layui.data(h,null);d.ajax({type:m.type,url:m.url,async:false,dataType:"json",success:function(p,q,s){var r=f(p);o.html(r);e.init()},error:function(r,p,q){i.msgError("Navbar error:"+q)},complete:function(q,p){l.config.elem=o}})}}if(m.spreadOne){var j=o.children("ul");j.find("li.layui-nav-item").each(function(){d(this).on("click",function(){d(this).siblings().removeClass("layui-nav-itemed")})})}return l};b.prototype.set=function(j){var k=this;k.config.data=undefined;d.extend(true,k.config,j);return k};b.prototype.on=function(m,p){var o=this;var l=o.config.elem;if(typeof(m)!=="string"){i.throwError("Navbar error:事件名配置出错，请参考API文档.")}var k=m.indexOf("(");var j=m.substr(0,k);var n=m.substring(k+1,m.indexOf(")"));if(j==="click"){if(l.attr("lay-filter")!==undefined){l.children("ul").find("li").each(function(){var q=d(this);if(q.find("dl").length>0){var r=q.find("dd").each(function(){d(this).on("click",function(){var v=d(this).children("a");var s=v.data("url");var t=v.children("i:first").data("icon");var w=v.children("cite").text();var u={elem:v,field:{href:s,icon:t,title:w}};p(u)})})}else{q.on("click",function(){var v=q.children("a");var s=v.data("url");var t=v.children("i:first").data("icon");var w=v.children("cite").text();var u={elem:v,field:{href:s,icon:t,title:w}};p(u)})}})}}};b.prototype.cleanCached=function(){layui.data(h,null)};function f(n){var m='<ul class="layui-nav layui-nav-tree beg-navbar">';for(var l=0;l<n.length;l++){if(n[l].spread){m+='<li class="layui-nav-item layui-nav-itemed">'}else{m+='<li class="layui-nav-item">'}if(n[l].children!==undefined&&n[l].children.length>0){m+='<a href="javascript:;">';if(n[l].icon!==undefined&&n[l].icon!==""){if(n[l].icon.indexOf("fa-")!==-1){m+='<i class="fa '+n[l].icon+'" aria-hidden="true" data-icon="'+n[l].icon+'"></i>'}else{m+='<i class="layui-icon" data-icon="'+n[l].icon+'">'+n[l].icon+"</i>"}}m+="<cite>"+n[l].title+"</cite>";m+="</a>";m+='<dl class="layui-nav-child">';for(var k=0;k<n[l].children.length;k++){m+="<dd>";m+='<a href="javascript:;" data-url="'+n[l].children[k].href+'">';if(n[l].children[k].icon!==undefined&&n[l].children[k].icon!==""){if(n[l].children[k].icon.indexOf("fa-")!==-1){m+='<i class="fa '+n[l].children[k].icon+'" data-icon="'+n[l].children[k].icon+'" aria-hidden="true"></i>'}else{m+='<i class="layui-icon" data-icon="'+n[l].children[k].icon+'">'+n[l].children[k].icon+"</i>"}}m+="<cite>"+n[l].children[k].title+"</cite>";m+="</a>";m+="</dd>"}m+="</dl>"}else{var o=(n[l].href!==undefined&&n[l].href!=="")?'data-url="'+n[l].href+'"':"";m+='<a href="javascript:;" '+o+">";if(n[l].icon!==undefined&&n[l].icon!==""){if(n[l].icon.indexOf("fa-")!==-1){m+='<i class="fa '+n[l].icon+'" aria-hidden="true" data-icon="'+n[l].icon+'"></i>'}else{m+='<i class="layui-icon" data-icon="'+n[l].icon+'">'+n[l].icon+"</i>"}}m+="<cite>"+n[l].title+"</cite>";m+="</a>"}m+="</li>"}m+="</ul>";return m}var a=new b();c("navbar",function(j){return a.set(j)})});