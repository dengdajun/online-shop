layui.define("jquery",function(i){var e=layui.jquery,a=layui.hint(),j="layui-tree-enter",k=function(b){this.options=b},l={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};k.prototype.init=function(b){var c=this;b.addClass("layui-box layui-tree"),c.options.skin&&b.addClass("layui-tree-skin-"+c.options.skin),c.tree(b),c.on(b)},k.prototype.tree=function(b,f){var c=this,d=c.options,g=f||d.nodes;layui.each(g,function(h,m){var s=m.children&&m.children.length>0,n=e('<ul class="'+(m.spread?"layui-show":"")+'"></ul>'),o=e(["<li "+(m.spread?'data-spread="'+m.spread+'"':"")+">",function(){return s?'<i class="layui-icon layui-tree-spread">'+(m.spread?l.arrow[1]:l.arrow[0])+"</i>":""}(),function(){return d.check?'<i class="layui-icon layui-tree-check">'+("checkbox"===d.check?l.checkbox[0]:"radio"===d.check?l.radio[0]:"")+"</i>":""}(),function(){return'<a href="'+(m.href||"javascript:;")+'" '+(d.target&&m.href?'target="'+d.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(s?"branch":"leaf")+'">'+(s?m.spread?l.branch[1]:l.branch[0]:l.leaf)+"</i>")+("<cite>"+(m.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));s&&(o.append(n),c.tree(n,m.children)),b.append(o),"function"==typeof d.click&&c.click(o,m),c.spread(o,m),d.drag&&c.drag(o,m)})},k.prototype.click=function(c,b){var f=this,d=f.options;c.children("a").on("click",function(g){layui.stope(g),d.click(b)})},k.prototype.spread=function(h,g){var c=this,n=(c.options,h.children(".layui-tree-spread")),b=h.children("ul"),f=h.children("a"),d=function(){h.data("spread")?(h.data("spread",null),b.removeClass("layui-show"),n.html(l.arrow[0]),f.find(".layui-icon").html(l.branch[0])):(h.data("spread",!0),b.addClass("layui-show"),n.html(l.arrow[1]),f.find(".layui-icon").html(l.branch[1]))};b[0]&&(n.on("click",d),f.on("dblclick",d))},k.prototype.on=function(b){var f=this,c=f.options,d="layui-tree-drag";b.find("i").on("selectstart",function(g){return !1}),c.drag&&e(document).on("mousemove",function(m){var n=f.move;if(n.from){var g=(n.to,e('<div class="layui-box '+d+'"></div>'));m.preventDefault(),e("."+d)[0]||e("body").append(g);var h=e("."+d)[0]?e("."+d):g;h.addClass("layui-show").html(n.from.elem.children("a").html()),h.css({left:m.pageX+10,top:m.pageY+10})}}).on("mouseup",function(){var g=f.move;g.from&&(g.from.elem.children("a").removeClass(j),g.to&&g.to.elem.children("a").removeClass(j),f.move={},e("."+d).remove())})},k.prototype.move={},k.prototype.drag=function(b,f){var c=this,d=(c.options,b.children("a")),g=function(){var h=e(this),m=c.move;m.from&&(m.to={item:f,elem:b},h.addClass(j))};d.on("mousedown",function(){var h=c.move;h.from={item:f,elem:b}}),d.on("mouseenter",g).on("mousemove",g).on("mouseleave",function(){var m=e(this),h=c.move;h.from&&(delete h.to,m.removeClass(j))})},i("tree",function(c){var d=new k(c=c||{}),b=e(c.elem);return b[0]?void d.init(b):a.error("layui.tree 没有找到"+c.elem+"元素")})});