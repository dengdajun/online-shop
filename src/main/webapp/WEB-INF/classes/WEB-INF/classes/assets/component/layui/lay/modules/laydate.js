layui.define(function(l){var d=window,e={path:"",skin:"default",format:"YYYY-MM-DD",min:"1900-01-01 00:00:00",max:"2099-12-31 23:59:59",isv:!1,init:!0},q={},a=document,n="createElement",r="getElementById",o="getElementsByTagName",i=["laydate_box","laydate_void","laydate_click","LayDateSkin","skins/","/laydate.css"];d.laydate=function(b){return b=b||{},q.run(b),laydate},laydate.v="1.1",q.trim=function(b){return b=b||"",b.replace(/^\s|\s$/g,"").replace(/\s+/g," ")},q.digit=function(b){return b<10?"0"+(0|b):b},q.stopmp=function(b){return b=b||d.event,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0,this},q.each=function(b,c){for(var g=0,f=b.length;g<f&&c(g,b[g])!==!1;g++){}},q.hasClass=function(c,b){return c=c||{},new RegExp("\\b"+b+"\\b").test(c.className)},q.addClass=function(c,b){return c=c||{},q.hasClass(c,b)||(c.className+=" "+b),c.className=q.trim(c.className),this},q.removeClass=function(b,c){if(b=b||{},q.hasClass(b,c)){var f=new RegExp("\\b"+c+"\\b");b.className=b.className.replace(f,"")}return this},q.removeCssAttr=function(b,c){var f=b.style;f.removeProperty?f.removeProperty(c):f.removeAttribute(c)},q.shde=function(c,b){c.style.display=b?"none":"block"},q.query=function(f){if(f&&1===f.nodeType){if("input"!==f.tagName.toLowerCase()){throw new Error("选择器elem错误")}return f}var h,f=q.trim(f).split(" "),b=a[r](f[0].substr(1));if(b){if(f[1]){if(/^\./.test(f[1])){var j,c=f[1].substr(1),g=new RegExp("\\b"+c+"\\b");return h=[],j=a.getElementsByClassName?b.getElementsByClassName(c):b[o]("*"),q.each(j,function(k,m){g.test(m.className)&&h.push(m)}),h[0]?h:""}return h=b[o](f[1]),h[0]?b[o](f[1]):""}return b}},q.on=function(b,f,c){return b.attachEvent?b.attachEvent("on"+f,function(){c.call(b,d.even)}):b.addEventListener(f,c,!1),q},q.stopMosup=function(c,b){"mouseup"!==c&&q.on(b,"mouseup",function(f){q.stopmp(f)})},q.run=function(c){var b=(q.query,c.elem);b&&(i.elemv=/textarea|input/.test(b.tagName.toLocaleLowerCase())?"value":"innerHTML",("init" in c?c.init:e.init)&&!b[i.elemv]&&(b[i.elemv]=laydate.now(null,c.format||e.format)),q.view(b,c),q.reshow())},q.scroll=function(b){return b=b?"scrollLeft":"scrollTop",a.body[b]|a.documentElement[b]},q.winarea=function(b){return document.documentElement[b?"clientWidth":"clientHeight"]},q.isleap=function(b){return b%4===0&&b%100!==0||b%400===0},q.checkVoid=function(g,c,f){var b=[];return g=0|g,c=0|c,f=0|f,g<q.mins[0]?b=["y"]:g>q.maxs[0]?b=["y",1]:g>=q.mins[0]&&g<=q.maxs[0]&&(g==q.mins[0]&&(c<q.mins[1]?b=["m"]:c==q.mins[1]&&f<q.mins[2]&&(b=["d"])),g==q.maxs[0]&&(c>q.maxs[1]?b=["m",1]:c==q.maxs[1]&&f>q.maxs[2]&&(b=["d",1]))),b},q.timeVoid=function(c,b){if(q.ymd[1]+1==q.mins[1]&&q.ymd[2]==q.mins[2]){if(0===b&&c<q.mins[3]){return 1}if(1===b&&c<q.mins[4]){return 1}if(2===b&&c<q.mins[5]){return 1}}else{if(q.ymd[1]+1==q.maxs[1]&&q.ymd[2]==q.maxs[2]){if(0===b&&c>q.maxs[3]){return 1}if(1===b&&c>q.maxs[4]){return 1}if(2===b&&c>q.maxs[5]){return 1}}}if(c>(b?59:23)){return 1}},q.check=function(){var c=q.options.format.replace(/YYYY|MM|DD|hh|mm|ss/g,"\\d+\\").replace(/\\$/g,""),h=new RegExp(c),g=q.elem[i.elemv],f=g.match(/\d+/g)||[],b=q.checkVoid(f[0],f[1],f[2]);if(""!==g.replace(/\s/g,"")){if(!h.test(g)){return q.elem[i.elemv]="",q.msg("日期不符合格式，请重新选择。"),1}if(b[0]){return q.elem[i.elemv]="",q.msg("日期不在有效期内，请重新选择。"),1}b.value=q.elem[i.elemv].match(h).join(),f=b.value.match(/\d+/g),f[1]<1?(f[1]=1,b.auto=1):f[1]>12?(f[1]=12,b.auto=1):f[1].length<2&&(b.auto=1),f[2]<1?(f[2]=1,b.auto=1):f[2]>q.months[(0|f[1])-1]?(f[2]=31,b.auto=1):f[2].length<2&&(b.auto=1),f.length>3&&(q.timeVoid(f[3],0)&&(b.auto=1),q.timeVoid(f[4],1)&&(b.auto=1),q.timeVoid(f[5],2)&&(b.auto=1)),b.auto?q.creation([f[0],0|f[1],0|f[2]],1):b.value!==q.elem[i.elemv]&&(q.elem[i.elemv]=b.value)}},q.months=[31,null,31,30,31,30,31,31,30,31,30,31],q.viewDate=function(c,h,g){var f=(q.query,{}),b=new Date;c<(0|q.mins[0])&&(c=0|q.mins[0]),c>(0|q.maxs[0])&&(c=0|q.maxs[0]),b.setFullYear(c,h,g),f.ymd=[b.getFullYear(),b.getMonth(),b.getDate()],q.months[1]=q.isleap(f.ymd[0])?29:28,b.setFullYear(f.ymd[0],f.ymd[1],1),f.FDay=b.getDay(),f.PDay=q.months[0===h?11:h-1]-f.FDay+1,f.NDay=1,q.each(i.tds,function(k,m){var t,p=f.ymd[0],j=f.ymd[1]+1;m.className="",k<f.FDay?(m.innerHTML=t=k+f.PDay,q.addClass(m,"laydate_nothis"),1===j&&(p-=1),j=1===j?12:j-1):k>=f.FDay&&k<f.FDay+q.months[f.ymd[1]]?(m.innerHTML=t=k-f.FDay+1,k-f.FDay+1===f.ymd[2]&&(q.addClass(m,i[2]),f.thisDay=m)):(m.innerHTML=t=f.NDay++,q.addClass(m,"laydate_nothis"),12===j&&(p+=1),j=12===j?1:j+1),q.checkVoid(p,j,t)[0]&&q.addClass(m,i[1]),q.options.festival&&q.festival(m,j+"."+t),m.setAttribute("y",p),m.setAttribute("m",j),m.setAttribute("d",t),p=j=t=null}),q.valid=!q.hasClass(f.thisDay,i[1]),q.ymd=f.ymd,i.year.value=q.ymd[0]+"年",i.month.value=q.digit(q.ymd[1]+1)+"月",q.each(i.mms,function(k,m){var j=q.checkVoid(q.ymd[0],(0|m.getAttribute("m"))+1);"y"===j[0]||"m"===j[0]?q.addClass(m,i[1]):q.removeClass(m,i[1]),q.removeClass(m,i[2]),j=null}),q.addClass(i.mms[q.ymd[1]],i[2]),f.times=[0|q.inymd[3]||0,0|q.inymd[4]||0,0|q.inymd[5]||0],q.each(new Array(3),function(j){q.hmsin[j].value=q.digit(q.timeVoid(f.times[j],j)?0|q.mins[j+3]:0|f.times[j])}),q[q.valid?"removeClass":"addClass"](i.ok,i[1])},q.festival=function(b,c){var f;switch(c){case"1.1":f="元旦";break;case"3.8":f="妇女";break;case"4.5":f="清明";break;case"5.1":f="劳动";break;case"6.1":f="儿童";break;case"9.10":f="教师";break;case"10.1":f="国庆"}f&&(b.innerHTML=f),f=null},q.viewYears=function(b){var c=q.query,f="";q.each(new Array(14),function(g){f+=7===g?"<li "+(parseInt(i.year.value)===b?'class="'+i[2]+'"':"")+' y="'+b+'">'+b+"年</li>":'<li y="'+(b-7+g)+'">'+(b-7+g)+"年</li>"}),c("#laydate_ys").innerHTML=f,q.each(c("#laydate_ys li"),function(h,g){"y"===q.checkVoid(g.getAttribute("y"))[0]?q.addClass(g,i[1]):q.on(g,"click",function(j){q.stopmp(j).reshow(),q.viewDate(0|this.getAttribute("y"),q.ymd[1],q.ymd[2])})})},q.initDate=function(){var c=(q.query,new Date),b=q.elem[i.elemv].match(/\d+/g)||[];b.length<3&&(b=q.options.start.match(/\d+/g)||[],b.length<3&&(b=[c.getFullYear(),c.getMonth()+1,c.getDate()])),q.inymd=b,q.viewDate(b[0],b[1]-1,b[2])},q.iswrite=function(){var c=q.query,b={time:c("#laydate_hms")};q.shde(b.time,!q.options.istime),q.shde(i.oclear,!("isclear" in q.options?q.options.isclear:1)),q.shde(i.otoday,!("istoday" in q.options?q.options.istoday:1)),q.shde(i.ok,!("issure" in q.options?q.options.issure:1))},q.orien=function(g,c){var f,b=q.elem.getBoundingClientRect();g.style.left=b.left+(c?0:q.scroll(1))+"px",f=b.bottom+g.offsetHeight/1.5<=q.winarea()?b.bottom-1:b.top>g.offsetHeight/1.5?b.top-g.offsetHeight+1:q.winarea()-g.offsetHeight,g.style.top=Math.max(f+(c?0:q.scroll()),1)+"px"},q.follow=function(b){q.options.fixed?(b.style.position="fixed",q.orien(b,1)):(b.style.position="absolute",q.orien(b))},q.viewtb=function(){var h,b=[],f=["日","一","二","三","四","五","六"],c={},g=a[n]("table"),j=a[n]("thead");return j.appendChild(a[n]("tr")),c.creath=function(m){var k=a[n]("th");k.innerHTML=f[m],j[o]("tr")[0].appendChild(k),k=null},q.each(new Array(6),function(k){b.push([]),h=g.insertRow(0),q.each(new Array(7),function(m){b[k][m]=0,0===k&&c.creath(m),h.insertCell(m)})}),g.insertBefore(j,g.children[0]),g.id=g.className="laydate_table",h=b=null,g.outerHTML.toLowerCase()}(),q.view=function(h,g){var f,b=q.query,c={};g=g||h,q.elem=h,q.options=g,q.options.format||(q.options.format=e.format),q.options.start=q.options.start||"",q.mm=c.mm=[q.options.min||e.min,q.options.max||e.max],q.mins=c.mm[0].match(/\d+/g),q.maxs=c.mm[1].match(/\d+/g),q.box?q.shde(q.box):(f=a[n]("div"),f.id=i[0],f.className=i[0],f.style.cssText="position: absolute;",f.setAttribute("name","laydate-v"+laydate.v),f.innerHTML=c.html='<div class="laydate_top"><div class="laydate_ym laydate_y" id="laydate_YY"><a class="laydate_choose laydate_chprev laydate_tab"><cite></cite></a><input id="laydate_y" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite></cite></a><div class="laydate_yms"><a class="laydate_tab laydate_chtop"><cite></cite></a><ul id="laydate_ys"></ul><a class="laydate_tab laydate_chdown"><cite></cite></a></div></div><div class="laydate_ym laydate_m" id="laydate_MM"><a class="laydate_choose laydate_chprev laydate_tab"><cite></cite></a><input id="laydate_m" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite></cite></a><div class="laydate_yms" id="laydate_ms">'+function(){var j="";return q.each(new Array(12),function(k){j+='<span m="'+k+'">'+q.digit(k+1)+"月</span>"}),j}()+"</div></div></div>"+q.viewtb+'<div class="laydate_bottom"><ul id="laydate_hms"><li class="laydate_sj">时间</li><li><input readonly>:</li><li><input readonly>:</li><li><input readonly></li></ul><div class="laydate_time" id="laydate_time"></div><div class="laydate_btn"><a id="laydate_clear">清空</a><a id="laydate_today">今天</a><a id="laydate_ok">确认</a></div>'+(e.isv?'<a href="http://sentsin.com/layui/laydate/" class="laydate_v" target="_blank">laydate-v'+laydate.v+"</a>":"")+"</div>",a.body.appendChild(f),q.box=b("#"+i[0]),q.events(),f=null),q.follow(q.box),g.zIndex?q.box.style.zIndex=g.zIndex:q.removeCssAttr(q.box,"z-index"),q.stopMosup("click",q.box),q.initDate(),q.iswrite(),q.check()},q.reshow=function(){return q.each(q.query("#"+i[0]+" .laydate_show"),function(c,b){q.removeClass(b,"laydate_show")}),this},q.close=function(){q.reshow(),q.shde(q.query("#"+i[0]),1),q.elem=null},q.parse=function(c,b,f){return c=c.concat(b),f=f||(q.options?q.options.format:e.format),f.replace(/YYYY|MM|DD|hh|mm|ss/g,function(g,h){return c.index=0|++c.index,q.digit(c[c.index])})},q.creation=function(g,c){var f=(q.query,q.hmsin),b=q.parse(g,[f[0].value,f[1].value,f[2].value]);q.elem[i.elemv]=b,c||(q.close(),"function"==typeof q.options.choose&&q.options.choose(b))},q.events=function(){var b=q.query,c={box:"#"+i[0]};q.addClass(a.body,"laydate_body"),i.tds=b("#laydate_table td"),i.mms=b("#laydate_ms span"),i.year=b("#laydate_y"),i.month=b("#laydate_m"),q.each(b(c.box+" .laydate_ym"),function(g,f){q.on(f,"click",function(h){q.stopmp(h).reshow(),q.addClass(this[o]("div")[0],"laydate_show"),g||(c.YY=parseInt(i.year.value),q.viewYears(c.YY))})}),q.on(b(c.box),"click",function(){q.reshow()}),c.tabYear=function(f){0===f?q.ymd[0]--:1===f?q.ymd[0]++:2===f?c.YY-=14:c.YY+=14,f<2?(q.viewDate(q.ymd[0],q.ymd[1],q.ymd[2]),q.reshow()):q.viewYears(c.YY)},q.each(b("#laydate_YY .laydate_tab"),function(g,f){q.on(f,"click",function(h){q.stopmp(h),c.tabYear(g)})}),c.tabMonth=function(f){f?(q.ymd[1]++,12===q.ymd[1]&&(q.ymd[0]++,q.ymd[1]=0)):(q.ymd[1]--,q.ymd[1]===-1&&(q.ymd[0]--,q.ymd[1]=11)),q.viewDate(q.ymd[0],q.ymd[1],q.ymd[2])},q.each(b("#laydate_MM .laydate_tab"),function(g,f){q.on(f,"click",function(h){q.stopmp(h).reshow(),c.tabMonth(g)})}),q.each(b("#laydate_ms span"),function(g,f){q.on(f,"click",function(h){q.stopmp(h).reshow(),q.hasClass(this,i[1])||q.viewDate(q.ymd[0],0|this.getAttribute("m"),q.ymd[2])})}),q.each(b("#laydate_table td"),function(g,f){q.on(f,"click",function(h){q.hasClass(this,i[1])||(q.stopmp(h),q.creation([0|this.getAttribute("y"),0|this.getAttribute("m"),0|this.getAttribute("d")]))})}),i.oclear=b("#laydate_clear"),q.on(i.oclear,"click",function(){q.elem[i.elemv]="",q.close()}),i.otoday=b("#laydate_today"),q.on(i.otoday,"click",function(){var f=new Date;q.creation([f.getFullYear(),f.getMonth()+1,f.getDate()])}),i.ok=b("#laydate_ok"),q.on(i.ok,"click",function(){q.valid&&q.creation([q.ymd[0],q.ymd[1]+1,q.ymd[2]])}),c.times=b("#laydate_time"),q.hmsin=c.hmsin=b("#laydate_hms input"),c.hmss=["小时","分钟","秒数"],c.hmsarr=[],q.msg=function(h,g){var f='<div class="laydte_hsmtex">'+(g||"提示")+"<span>×</span></div>";"string"==typeof h?(f+="<p>"+h+"</p>",q.shde(b("#"+i[0])),q.removeClass(c.times,"laydate_time1").addClass(c.times,"laydate_msg")):(c.hmsarr[h]?f=c.hmsarr[h]:(f+='<div id="laydate_hmsno" class="laydate_hmsno">',q.each(new Array(0===h?24:60),function(j){f+="<span>"+j+"</span>"}),f+="</div>",c.hmsarr[h]=f),q.removeClass(c.times,"laydate_msg"),q[0===h?"removeClass":"addClass"](c.times,"laydate_time1")),q.addClass(c.times,"laydate_show"),c.times.innerHTML=f},c.hmson=function(j,g){var h=b("#laydate_hmsno span"),f=q.valid?null:1;q.each(h,function(m,k){f?q.addClass(k,i[1]):q.timeVoid(m,g)?q.addClass(k,i[1]):q.on(k,"click",function(p){q.hasClass(this,i[1])||(j.value=q.digit(0|this.innerHTML))})}),q.addClass(h[0|j.value],"laydate_click")},q.each(c.hmsin,function(g,f){q.on(f,"click",function(h){q.stopmp(h).reshow(),q.msg(g,c.hmss[g]),c.hmson(this,g)})}),q.on(a,"mouseup",function(){var f=b("#"+i[0]);f&&"none"!==f.style.display&&(q.check()||q.close())}).on(a,"keydown",function(g){g=g||d.event;var f=g.keyCode;13===f&&q.elem&&q.creation([q.ymd[0],q.ymd[1]+1,q.ymd[2]])})},laydate.reset=function(){q.box&&q.elem&&q.follow(q.box)},laydate.now=function(b,c){var f=new Date(0|b?function(g){return g<86400000?+new Date+86400000*g:g}(parseInt(b)):+new Date);return q.parse([f.getFullYear(),f.getMonth()+1,f.getDate()],[f.getHours(),f.getMinutes(),f.getSeconds()],c)},layui.addcss("modules/laydate/laydate.css",function(){},"laydatecss"),l("laydate",laydate)});