layui.define(["element","common"],function(m){var r="tab",l=layui.jquery,k=layui.element(),j=layui.common,o=0,n=function(){this.config={elem:undefined,closed:true,autoRefresh:false}};var q={};n.prototype.set=function(b){var a=this;l.extend(true,a.config,b);return a};n.prototype.init=function(){var c=this;var b=c.config;if(typeof(b.elem)!=="string"&&typeof(b.elem)!=="object"){common.throwError("Tab error: elem参数未定义或设置出错，具体设置格式请参考文档API.")}var a;if(typeof(b.elem)==="string"){a=l(""+b.elem+"")}if(typeof(b.elem)==="object"){a=b.elem}if(a.length===0){common.throwError("Tab error:找不到elem参数配置的容器，请检查.")}var d=a.attr("lay-filter");if(d===undefined||d===""){common.throwError("Tab error:请为elem容器设置一个lay-filter过滤器")}b.elem=a;q.titleBox=a.children("ul.layui-tab-title");q.contentBox=a.children("div.layui-tab-content");q.tabFilter=d;return c};n.prototype.exists=function(a){var b=q.titleBox===undefined?this.init():this,c=-1;q.titleBox.find("li").each(function(f,e){var d=l(this).children("cite");if(d.text()===a){c=f}});return c};n.prototype.tabAdd=function(f){var b=this;var a=b.config;var d=b.exists(f.title);if(d===-1){o++;var c='<iframe src="'+f.href+'" data-id="'+o+'"></iframe>';var e="";if(f.icon!==undefined){if(f.icon.indexOf("fa-")!==-1){e+='<i class="fa '+f.icon+'" aria-hidden="true"></i>'}else{e+='<i class="layui-icon">'+f.icon+"</i>"}}e+="<cite>"+f.title+"</cite>";if(a.closed){e+='<i class="layui-icon layui-unselect layui-tab-close" data-id="'+o+'">&#x1006;</i>'}k.tabAdd(q.tabFilter,{title:e,content:c});q.contentBox.find("iframe[data-id="+o+"]").each(function(){l(this).height(q.contentBox.height())});if(a.closed){q.titleBox.find("li").children("i.layui-tab-close[data-id="+o+"]").on("click",function(){k.tabDelete(q.tabFilter,l(this).parent("li").index()).init()})}k.tabChange(q.tabFilter,q.titleBox.find("li").length-1)}else{k.tabChange(q.tabFilter,d);if(a.autoRefresh){a.elem.find("div.layui-tab-content > div").eq(d).children("iframe")[0].contentWindow.location.reload()}}};n.prototype.on=function(b,a){};var p=new n();m(r,function(a){return p.set(a)})});