layui.define("jquery",function(h){var f=layui.jquery,g=function(a){},e='<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>';g.prototype.load=function(d){var m,u,c,o,K=this,a=0;d=d||{};var v=f(d.elem);if(v[0]){var i=f(d.scrollElem||document),J=d.mb||50,s=!("isAuto" in d)||d.isAuto,L=d.end||"没有更多了",y=d.scrollElem&&d.scrollElem!==document,b="<cite>加载更多</cite>",r=f('<div class="layui-flow-more"><a href="javascript:;">'+b+"</a></div>");v.find(".layui-flow-more")[0]||v.append(r);var n=function(j,k){j=f(j),r.before(j),k=0==k||null,k?r.html(L):r.find("a").html(b),u=k,m=null,c&&c()},p=function(){m=!0,r.find("a").html(e),"function"==typeof d.done&&d.done(++a,n)};if(p(),r.find("a").on("click",function(){f(this);u||m||p()}),d.isLazyimg){var c=K.lazyimg({elem:d.elem+" img",scrollElem:d.scrollElem})}return s?(i.on("scroll",function(){var j=f(this),k=j.scrollTop();o&&clearTimeout(o),u||(o=setTimeout(function(){var q=y?j.height():f(window).height(),l=y?j.prop("scrollHeight"):document.documentElement.scrollHeight;l-k-q<=J&&(m||p())},100))}),K):K}},g.prototype.lazyimg=function(c){var o,t=this,i=0;c=c||{};var n=f(c.scrollElem||document),r=c.elem||"img",a=c.scrollElem&&c.scrollElem!==document,b=function(l,p){var k=n.scrollTop(),q=k+p,j=a?function(){return l.offset().top-n.offset().top+k}():l.offset().top;if(j>=k&&j<=q&&!l.attr("src")){var m=l.attr("lay-src");layui.img(m,function(){var s=t.lazyimg.elem.eq(i);l.attr("src",m).removeAttr("lay-src"),s[0]&&u(s),i++})}},u=function(k,s){var q=a?(s||n).height():f(window).height(),l=n.scrollTop(),p=l+q;if(t.lazyimg.elem=f(r),k){b(k,q)}else{for(var m=0;m<t.lazyimg.elem.length;m++){var j=t.lazyimg.elem.eq(m),v=a?function(){return j.offset().top-n.offset().top+l}():j.offset().top;if(b(j,q),i=m,v>p){break}}}};if(u(),!o){var d;n.on("scroll",function(){var j=f(this);d&&clearTimeout(d),d=setTimeout(function(){u(null,j)},50)}),o=!0}return u},h("flow",new g)});