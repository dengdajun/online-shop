layui.define(["element","common"],function(p){var o=layui.jquery,l=parent.layer===undefined?layui.layer:parent.layer,n=layui.element(),j=layui.common,k="tb_navbar";var q=function(){this.config={elem:undefined,data:undefined,url:undefined,type:"GET",cached:false,spreadOne:false};this.v="0.0.1"};q.prototype.render=function(){var b=this;var a=b.config;if(typeof(a.elem)!=="string"&&typeof(a.elem)!=="object"){j.throwError("Navbar error: elem参数未定义或设置出错，具体设置格式请参考文档API.")}var e;if(typeof(a.elem)==="string"){e=o(""+a.elem+"")}if(typeof(a.elem)==="object"){e=a.elem}if(e.length===0){j.throwError("Navbar error:找不到elem参数配置的容器，请检查.")}if(a.data===undefined&&a.url===undefined){j.throwError("Navbar error:请为Navbar配置数据源.")}if(a.data!==undefined&&typeof(a.data)==="object"){var c=m(a.data);e.html(c);n.init();b.config.elem=e}else{if(a.cached){var f=layui.data(k);if(f.navbar===undefined){o.ajax({type:a.type,url:a.url,async:false,dataType:"json",success:function(t,i,g){layui.data(k,{key:"navbar",value:t});var h=m(t);e.html(h);n.init()},error:function(g,i,h){j.msgError("Navbar error:"+h)},complete:function(g,h){b.config.elem=e}})}else{var c=m(f.navbar);e.html(c);n.init();b.config.elem=e}}else{layui.data(k,null);o.ajax({type:a.type,url:a.url,async:false,dataType:"json",success:function(t,i,g){var h=m(t);e.html(h);n.init()},error:function(g,i,h){j.msgError("Navbar error:"+h)},complete:function(g,h){b.config.elem=e}})}}if(a.spreadOne){var d=e.children("ul");d.find("li.layui-nav-item").each(function(){o(this).on("click",function(){o(this).siblings().removeClass("layui-nav-itemed")})})}return b};q.prototype.set=function(b){var a=this;a.config.data=undefined;o.extend(true,a.config,b);return a};q.prototype.on=function(a,e){var f=this;var b=f.config.elem;if(typeof(a)!=="string"){j.throwError("Navbar error:事件名配置出错，请参考API文档.")}var c=a.indexOf("(");var d=a.substr(0,c);var g=a.substring(c+1,a.indexOf(")"));if(d==="click"){if(b.attr("lay-filter")!==undefined){b.children("ul").find("li").each(function(){var i=o(this);if(i.find("dl").length>0){var h=i.find("dd").each(function(){o(this).on("click",function(){var y=o(this).children("a");var B=y.data("url");var A=y.children("i:first").data("icon");var x=y.children("cite").text();var z={elem:y,field:{href:B,icon:A,title:x}};e(z)})})}else{i.on("click",function(){var y=i.children("a");var B=y.data("url");var A=y.children("i:first").data("icon");var x=y.children("cite").text();var z={elem:y,field:{href:B,icon:A,title:x}};e(z)})}})}}};q.prototype.cleanCached=function(){layui.data(k,null)};function m(e){var a='<ul class="layui-nav layui-nav-tree beg-navbar">';for(var b=0;b<e.length;b++){if(e[b].spread){a+='<li class="layui-nav-item layui-nav-itemed">'}else{a+='<li class="layui-nav-item">'}if(e[b].children!==undefined&&e[b].children.length>0){a+='<a href="javascript:;">';if(e[b].icon!==undefined&&e[b].icon!==""){if(e[b].icon.indexOf("fa-")!==-1){a+='<i class="fa '+e[b].icon+'" aria-hidden="true" data-icon="'+e[b].icon+'"></i>'}else{a+='<i class="layui-icon" data-icon="'+e[b].icon+'">'+e[b].icon+"</i>"}}a+="<cite>"+e[b].title+"</cite>";a+="</a>";a+='<dl class="layui-nav-child">';for(var c=0;c<e[b].children.length;c++){a+="<dd>";a+='<a href="javascript:;" data-url="'+e[b].children[c].href+'">';if(e[b].children[c].icon!==undefined&&e[b].children[c].icon!==""){if(e[b].children[c].icon.indexOf("fa-")!==-1){a+='<i class="fa '+e[b].children[c].icon+'" data-icon="'+e[b].children[c].icon+'" aria-hidden="true"></i>'}else{a+='<i class="layui-icon" data-icon="'+e[b].children[c].icon+'">'+e[b].children[c].icon+"</i>"}}a+="<cite>"+e[b].children[c].title+"</cite>";a+="</a>";a+="</dd>"}a+="</dl>"}else{var d=(e[b].href!==undefined&&e[b].href!=="")?'data-url="'+e[b].href+'"':"";a+='<a href="javascript:;" '+d+">";if(e[b].icon!==undefined&&e[b].icon!==""){if(e[b].icon.indexOf("fa-")!==-1){a+='<i class="fa '+e[b].icon+'" aria-hidden="true" data-icon="'+e[b].icon+'"></i>'}else{a+='<i class="layui-icon" data-icon="'+e[b].icon+'">'+e[b].icon+"</i>"}}a+="<cite>"+e[b].title+"</cite>";a+="</a>"}a+="</li>"}a+="</ul>";return a}var r=new q();p("navbar",function(a){return r.set(a)})});